# 内核模块化结构规划

参考 Linux 内核的组织形式，将当前 `kernel/src` 下的功能拆分为多个子模块，以便后续扩展和维护。

## 模块结构

```
kernel/
 ├── arch/           # 架构相关代码（分页、启动、汇编等）
 ├── mm/             # 内存管理
 ├── sched/          # 调度器
 ├── ipc/            # 进程间通信
 ├── drivers/        # 设备驱动
 ├── kernel_core/    # 核心调度、进程管理、系统调用等
 └── Cargo.toml      # 内核 workspace 配置
```

## 模块说明

### arch/
- 启动代码（`_start`）
- 分页初始化
- 中断处理
- 汇编辅助函数

### mm/
- 物理内存分配器
- 虚拟内存管理
- 高半区映射

### sched/
- 进程调度算法
- 上下文切换

### ipc/
- 消息队列
- 信号机制
- 管道

### drivers/
- VGA 文本输出
- 串口驱动
- 其他硬件驱动

### kernel_core/
- 进程管理
- 系统调用接口
- 核心初始化流程

## 迁移计划
1. 创建各模块目录与 `Cargo.toml`
2. 将现有 `kernel/src` 中的相关代码迁移到对应模块
3. 更新 `kernel/Cargo.toml` 以适配 workspace 构建
4. 确保构建与启动流程正常